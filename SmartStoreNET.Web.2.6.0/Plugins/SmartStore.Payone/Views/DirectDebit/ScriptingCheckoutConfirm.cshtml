@using SmartStore.Payone.Services;
@model SmartStore.Payone.Models.DirectDebitCheckoutConfirmModel

<script type="text/javascript">
	$(document).ready(function () {

		// ensure mandate is confirmed
		$('.confirm-order-next-step-button').on('submitOrder', function (event) {
			event.isOrderValid = $('#PayoneDirectDebitConfirmMandate').is(':checked');

			if (false === event.isOrderValid) {
				var pleaseConfirm = '@T("Plugins.SmartStore.Payone.DirectDebit.ConfirmSepaMandate.Validate")';

				if (true === event.isMobile) {
					alert(pleaseConfirm);
				}
				else {
					displayNotification(pleaseConfirm, 'error');
					$.scrollTo($('#PayoneSepaMandate'), 800, { offset: -70 });
				}
			}
		});
	});
</script>
